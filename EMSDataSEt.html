<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>EMS PCR </title>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://www.parsecdn.com/js/parse-1.2.18.min.js"></script>
    <script src="MW.js" type="text/javascript"></script>
    <script src="TheCall.js" type="text/javascript"></script> 
    <script src="TheEncounter.js" type="text/javascript"></script> 
    <script src="Utilities.js" type="text/javascript"></script>     
    <script>
        Parse.initialize("8vNcAs6Z0c4jyHvuW5zezUXij8DquZLeYP4pFicD", "Ipw8skfNMGvX9uGc8LHn0qCbAIhWjrZP5LEHm9vI");
    </script>
</head>
<body>
    <script>

       // getElementValues()

        //MW.getPCR("6kmmCYhdhW").then(function (result) {
        
        MW.getPCR("qnE1z6XYCT").then(function (result) {
            if(typeof result.attributes.emsDataSet !='undefined')
                createTheEncouter(result.attributes.emsDataSet);
           // console.log(result)

        });

        var currentdate = new Date();
        var datetime = currentdate.getDate() + "/" + (currentdate.getMonth() + 1) + "/" + currentdate.getFullYear() + " @ "
                        + currentdate.getHours() + ":" + currentdate.getMinutes() + ":" + currentdate.getSeconds();
        
        /*
        var promise = createEMSOutput("i98RtFEzOb", function (results)
        {
            setePatient(results);
           // console.log(results)

            for (var i = 0; i < results.length ; i++) {
               // console.log(results[i].attributes.name);

              //  switch (results[i].attributes.name) {
                   // case "ePatient":
                       // console.log(results[i]);

                        break;
                }
            });
            
        /*
        });
        

        
        var PCR = [];
        var dem = {};
        var demSet = [];
        var dem = {};

        var promise = generateDEMDataSet("0jwy36VRKa", function(results)
        {
            var v334 = new Object();
            //console.log(results);
            for(var i=0;i<results.length-1; i++)
            {
                switch(results[i].attributes.name)
                {
                    case "dAgency":
                    var dAgency = new Object;
                    dAgency=getdAgency(results[i], demSet);
                    console.log(i);
                    console.log(dAgency);
                    break;
                }
            }
         }

        var PCR = Parse.Object.extend("PCR");

        var count = function(object){
            var query = new Parse.Query(PCR);
            var promise = query.count({
                success: function(count){
                    return count;
                },
                error: function(error){
                    console.log(error);
                }
            });
            return promise;
        }

        var promise = count(PCR);
        promise.then(function(results){
            console.log(results);
        });
           */
        /*

         var PCR = [];
         var dem = {};
         var demSet = [];
       var dem = {};

       demSet = createConfiguration(FullNEMSISSet, DEMConfig);

       var promise = generateDEMDataSet("0jwy36VRKa", function(results)
       {
         var v334 = new Object();
         //console.log(results);
         for(var i=0;i<results.length-1; i++)
         {
             switch(results[i].attributes.name)
           {
             case "dAgency":
                 var dAgency = new Object;

              dAgency=getdAgency(results[i], demSet);
              console.log(i);
               console.log(dAgency);
               break;
           }
         }

         //console.log("v334.dAgency");
             //console.log(PCR["v334"]);
              // generateXML(dem, "dem", "3", function(results){
        }
     );

     */





    </script>
</body>
</html>